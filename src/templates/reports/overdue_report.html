<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{{ title }} - IP2A Report</title>
</head>
<body>
    <div class="header">
        <div>
            <h1>{{ title }}</h1>
            <p class="meta">{{ subtitle }}</p>
        </div>
        <div class="meta" style="text-align: right;">
            <p>Generated: {{ generated_at }}</p>
            <p>By: {{ generated_by }}</p>
        </div>
    </div>

    <!-- Summary -->
    <div class="stat-box" style="max-width: 300px;">
        <div class="stat-label">Total Overdue Balance</div>
        <div class="stat-value" style="color: #c53030;">{{ format_currency(total_overdue) }}</div>
    </div>

    {% if overdue_payments %}
    <table>
        <thead>
            <tr>
                <th>Member</th>
                <th>Contact</th>
                <th>Period</th>
                <th>Due</th>
                <th>Paid</th>
                <th>Balance</th>
            </tr>
        </thead>
        <tbody>
            {% for payment in overdue_payments %}
            <tr>
                <td>
                    {% if payment.member %}
                    <strong>{{ payment.member.last_name }}, {{ payment.member.first_name }}</strong>
                    <br><span style="font-size: 9pt; color: #666;">{{ payment.member.member_number or '' }}</span>
                    {% else %}
                    Member #{{ payment.member_id }}
                    {% endif %}
                </td>
                <td>
                    {% if payment.member %}
                    {% if payment.member.email %}{{ payment.member.email }}<br>{% endif %}
                    {{ format_phone(payment.member.phone) }}
                    {% else %}
                    —
                    {% endif %}
                </td>
                <td>
                    {% if payment.period %}
                    {{ payment.period.period_month }}/{{ payment.period.period_year }}
                    {% else %}
                    —
                    {% endif %}
                </td>
                <td>{{ format_currency(payment.amount_due) }}</td>
                <td>{{ format_currency(payment.amount_paid) }}</td>
                <td style="color: #c53030; font-weight: bold;">
                    {{ format_currency(payment.amount_due - (payment.amount_paid or 0)) }}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div style="text-align: center; padding: 40px; color: #666;">
        <p>No overdue payments found. Great job!</p>
    </div>
    {% endif %}

    <div class="footer">
        <p>IBEW Local 46 - Overdue Report</p>
        <p>Members on this list should be contacted regarding payment.</p>
    </div>
</body>
</html>
