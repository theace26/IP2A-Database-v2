{# Visual check mark progress indicator #}
{# Expects: book.count (0-3), book.max_allowed (2) #}

{% set count = book.count if book else 0 %}

<div class="flex items-center gap-1" title="{{ count }} of 2 check marks">
    {# Circle 1 #}
    {% if count >= 1 %}
    <div class="w-4 h-4 rounded-full {% if count >= 3 %}bg-error{% elif count == 2 %}bg-warning{% else %}bg-warning{% endif %}"></div>
    {% else %}
    <div class="w-4 h-4 rounded-full border-2 border-base-300"></div>
    {% endif %}

    {# Circle 2 #}
    {% if count >= 2 %}
    <div class="w-4 h-4 rounded-full {% if count >= 3 %}bg-error{% else %}bg-warning{% endif %}"></div>
    {% else %}
    <div class="w-4 h-4 rounded-full border-2 border-base-300"></div>
    {% endif %}

    {# Circle 3 (roll-off) #}
    {% if count >= 3 %}
    <div class="w-4 h-4 rounded-full bg-error"></div>
    {% else %}
    <div class="w-4 h-4 rounded-full border-2 border-base-300"></div>
    {% endif %}

    {# Status text #}
    <span class="ml-2 text-sm {% if count >= 3 %}text-error font-bold{% elif count >= 2 %}text-warning{% else %}text-base-content/60{% endif %}">
        {% if count >= 3 %}
        Rolled Off
        {% elif count == 2 %}
        At Limit
        {% else %}
        {{ count }}/2
        {% endif %}
    </span>
</div>
