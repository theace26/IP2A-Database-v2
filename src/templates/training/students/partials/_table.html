{# Students table with sortable headers #}
{% from 'components/_sortable_th.html' import sortable_header %}

<div class="overflow-x-auto">
    <table class="table table-pin-rows">
        <thead>
            <tr>
                <th class="bg-base-200">Student</th>
                <th class="bg-base-200">Cohort</th>
                {{ sortable_header('status', 'Status', current_sort, current_order, extra_params="[name='q'], [name='status'], [name='cohort'], [name='page']") }}
                {{ sortable_header('enrollment_date', 'Enrolled', current_sort, current_order, extra_params="[name='q'], [name='status'], [name='cohort'], [name='page']") }}
                <th class="bg-base-200 text-right">Actions</th>
            </tr>
        </thead>
        <tbody id="table-body">
            {% include 'training/students/partials/_table_body.html' %}
        </tbody>
    </table>
</div>

<!-- Pagination -->
{% if total_pages > 1 %}
<div class="flex justify-center p-4 border-t border-base-300">
    <div class="join">
        {% if current_page > 1 %}
        <button
            class="join-item btn btn-sm"
            hx-get="/training/students/search?page={{ current_page - 1 }}&q={{ query }}&status={{ status_filter }}&cohort={{ cohort_filter }}&sort={{ current_sort }}&order={{ current_order }}"
            hx-target="#student-table-container"
        >
            Previous
        </button>
        {% endif %}

        <button class="join-item btn btn-sm btn-disabled">
            Page {{ current_page }} of {{ total_pages }}
        </button>

        {% if current_page < total_pages %}
        <button
            class="join-item btn btn-sm"
            hx-get="/training/students/search?page={{ current_page + 1 }}&q={{ query }}&status={{ status_filter }}&cohort={{ cohort_filter }}&sort={{ current_sort }}&order={{ current_order }}"
            hx-target="#student-table-container"
        >
            Next
        </button>
        {% endif %}
    </div>
</div>
{% endif %}
